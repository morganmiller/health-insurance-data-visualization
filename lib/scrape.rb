require 'rest-client'
require 'pry'

module Scrape
  def self.call(filepath)
    body = '{"id":"b8in-sz6k","name":"QHP Landscape Individual Market Medical","description":"QHP Landscape Individual Market Medical - For instructions on how to read and use this data, please view the documentation available under the ‘About’ tab on this page.","displayType":"table","publicationAppendEnabled":false,"columns":[{"id":162968459,"name":"State","fieldName":"state","position":2,"width":160,"dataTypeName":"text","tableColumnId":16639797,"format":{},"flags":null,"metadata":{}},{"id":162968460,"name":"County","fieldName":"county","position":3,"width":172,"dataTypeName":"text","tableColumnId":16639798,"format":{},"flags":null,"metadata":{}},{"id":162968461,"name":"Metal Level","fieldName":"metal_level","position":4,"width":232,"dataTypeName":"text","tableColumnId":16639800,"format":{},"flags":null,"metadata":{}},{"id":162968462,"name":"Issuer Name","fieldName":"issuer_name","position":5,"width":232,"dataTypeName":"text","tableColumnId":16639802,"format":{},"flags":null,"metadata":{}},{"id":162968463,"name":"Plan ID - Standard Component","fieldName":"plan_id_standard_component","position":6,"width":436,"dataTypeName":"text","tableColumnId":16639805,"format":{},"flags":null,"metadata":{}},{"id":162968464,"name":"Plan Marketing Name","fieldName":"plan_marketing_name","position":7,"width":328,"dataTypeName":"text","tableColumnId":16639806,"format":{},"flags":null,"metadata":{}},{"id":162968465,"name":"Plan Type","fieldName":"plan_type","position":8,"width":208,"dataTypeName":"text","tableColumnId":16639808,"format":{},"flags":null,"metadata":{}},{"id":162968466,"name":"Rating Area","fieldName":"rating_area","position":9,"width":232,"dataTypeName":"text","tableColumnId":16639810,"format":{},"flags":null,"metadata":{}},{"id":162968467,"name":"Child Only Offering","fieldName":"child_only_offering","position":10,"width":328,"dataTypeName":"text","tableColumnId":16639813,"format":{},"flags":null,"metadata":{}},{"id":162968468,"name":"Source","fieldName":"source","position":11,"width":172,"dataTypeName":"text","tableColumnId":16639814,"format":{},"flags":null,"metadata":{}},{"id":162968469,"name":"Customer Service Phone Number Local","fieldName":"customer_service_phone_number_local","position":12,"width":520,"dataTypeName":"text","tableColumnId":16639815,"format":{},"flags":null,"metadata":{}},{"id":162968470,"name":"Customer Service Phone Number Toll Free","fieldName":"customer_service_phone_number_toll_free","position":13,"width":568,"dataTypeName":"text","tableColumnId":16639816,"format":{},"flags":null,"metadata":{}},{"id":162968471,"name":"Customer Service Phone Number TTY","fieldName":"customer_service_phone_number_tty","position":14,"width":496,"dataTypeName":"text","tableColumnId":16639817,"format":{},"flags":null,"metadata":{}},{"id":162968472,"name":"Network URL","fieldName":"network_url","position":15,"width":232,"dataTypeName":"url","tableColumnId":16639818,"format":{},"flags":null,"metadata":{}},{"id":162968473,"name":"Plan Brochure URL","fieldName":"plan_brochure_url","position":16,"width":304,"dataTypeName":"url","tableColumnId":16639819,"format":{},"flags":null,"metadata":{}},{"id":162968474,"name":"Summary of Benefits URL","fieldName":"summary_of_benefits_url","position":17,"width":376,"dataTypeName":"url","tableColumnId":16639820,"format":{},"flags":null,"metadata":{}},{"id":162968475,"name":"Drug Formulary URL","fieldName":"drug_formulary_url","position":18,"width":316,"dataTypeName":"url","tableColumnId":16639821,"format":{},"flags":null,"metadata":{}},{"id":162968476,"name":"Adult Dental","fieldName":"adult_dental","position":19,"width":244,"dataTypeName":"text","tableColumnId":16639822,"format":{},"flags":null,"metadata":{}},{"id":162968477,"name":"Child Dental","fieldName":"child_dental","position":20,"width":244,"dataTypeName":"text","tableColumnId":16639823,"format":{},"flags":null,"metadata":{}},{"id":162968478,"name":"Premium Scenarios","fieldName":"premium_scenarios","position":21,"width":304,"dataTypeName":"text","tableColumnId":16639824,"format":{},"flags":null,"metadata":{}},{"id":162968479,"name":"Premium Child","fieldName":"premium_child","position":22,"width":256,"dataTypeName":"money","tableColumnId":16639825,"format":{},"flags":null,"metadata":{}},{"id":162968480,"name":"Premium Adult Individual Age 21","fieldName":"premium_adult_individual_age_21","position":23,"width":472,"dataTypeName":"money","tableColumnId":16639826,"format":{},"flags":null,"metadata":{}},{"id":162968481,"name":"Premium Adult Individual Age 27","fieldName":"premium_adult_individual_age_27","position":24,"width":472,"dataTypeName":"money","tableColumnId":16639827,"format":{},"flags":null,"metadata":{}},{"id":162968482,"name":"Premium Adult Individual Age 30","fieldName":"premium_adult_individual_age_30","position":25,"width":472,"dataTypeName":"money","tableColumnId":16639828,"format":{},"flags":null,"metadata":{}},{"id":162968483,"name":"Premium Adult Individual Age 40","fieldName":"premium_adult_individual_age_40","position":26,"width":472,"dataTypeName":"money","tableColumnId":16639829,"format":{},"flags":null,"metadata":{}},{"id":162968484,"name":"Premium Adult Individual Age 50","fieldName":"premium_adult_individual_age_50","position":27,"width":472,"dataTypeName":"money","tableColumnId":16639830,"format":{},"flags":null,"metadata":{}},{"id":162968485,"name":"Premium Adult Individual Age 60","fieldName":"premium_adult_individual_age_60","position":28,"width":472,"dataTypeName":"money","tableColumnId":16639831,"format":{},"flags":null,"metadata":{}},{"id":162968486,"name":"Premium Couple 21  ","fieldName":"premium_couple_21","position":29,"width":328,"dataTypeName":"money","tableColumnId":16639832,"format":{},"flags":null,"metadata":{}},{"id":162968487,"name":"Premium Couple 30","fieldName":"premium_couple_30","position":30,"width":304,"dataTypeName":"money","tableColumnId":16639833,"format":{},"flags":null,"metadata":{}},{"id":162968488,"name":"Premium Couple 40","fieldName":"premium_couple_40","position":31,"width":304,"dataTypeName":"money","tableColumnId":16639834,"format":{},"flags":null,"metadata":{}},{"id":162968489,"name":"Premium Couple 50","fieldName":"premium_couple_50","position":32,"width":304,"dataTypeName":"money","tableColumnId":16639835,"format":{},"flags":null,"metadata":{}},{"id":162968490,"name":"Premium Couple 60","fieldName":"premium_couple_60","position":33,"width":304,"dataTypeName":"money","tableColumnId":16639836,"format":{},"flags":null,"metadata":{}},{"id":162968491,"name":"Couple+1 child, Age 21","fieldName":"couple_1_child_age_21","position":34,"width":364,"dataTypeName":"money","tableColumnId":16639837,"format":{},"flags":null,"metadata":{}},{"id":162968492,"name":"Couple+1 child, Age 30","fieldName":"couple_1_child_age_30","position":35,"width":364,"dataTypeName":"money","tableColumnId":16639838,"format":{},"flags":null,"metadata":{}},{"id":162968493,"name":"Couple+1 child, Age 40","fieldName":"couple_1_child_age_40","position":36,"width":364,"dataTypeName":"money","tableColumnId":16639839,"format":{},"flags":null,"metadata":{}},{"id":162968494,"name":"Couple+1 child, Age 50","fieldName":"couple_1_child_age_50","position":37,"width":364,"dataTypeName":"money","tableColumnId":16639840,"format":{},"flags":null,"metadata":{}},{"id":162968495,"name":"Couple+2 children, Age 21","fieldName":"couple_2_children_age_21","position":38,"width":400,"dataTypeName":"money","tableColumnId":16639841,"format":{},"flags":null,"metadata":{}},{"id":162968496,"name":"Couple+2 children, Age 30","fieldName":"couple_2_children_age_30","position":39,"width":400,"dataTypeName":"money","tableColumnId":16639842,"format":{},"flags":null,"metadata":{}},{"id":162968497,"name":"Couple+2 children, Age 40","fieldName":"couple_2_children_age_40","position":40,"width":400,"dataTypeName":"money","tableColumnId":16639843,"format":{},"flags":null,"metadata":{}},{"id":162968498,"name":"Couple+2 children, Age 50","fieldName":"couple_2_children_age_50","position":41,"width":400,"dataTypeName":"money","tableColumnId":16639844,"format":{},"flags":null,"metadata":{}},{"id":162968499,"name":"Couple+3 or more Children, Age 21","fieldName":"couple_3_or_more_children_age_21","position":42,"width":496,"dataTypeName":"money","tableColumnId":16639845,"format":{},"flags":null,"metadata":{}},{"id":162968500,"name":"Couple+3 or more Children, Age 30","fieldName":"couple_3_or_more_children_age_30","position":43,"width":496,"dataTypeName":"money","tableColumnId":16639846,"format":{},"flags":null,"metadata":{}},{"id":162968501,"name":"Couple+3 or more Children, Age 40","fieldName":"couple_3_or_more_children_age_40","position":44,"width":496,"dataTypeName":"money","tableColumnId":16639847,"format":{},"flags":null,"metadata":{}},{"id":162968502,"name":"Couple+3 or more Children, Age 50","fieldName":"couple_3_or_more_children_age_50","position":45,"width":496,"dataTypeName":"money","tableColumnId":16639848,"format":{},"flags":null,"metadata":{}},{"id":162968503,"name":"Individual+1 child, Age 21","fieldName":"individual_1_child_age_21","position":46,"width":412,"dataTypeName":"money","tableColumnId":16639849,"format":{},"flags":null,"metadata":{}},{"id":162968504,"name":"Individual+1 child, Age 30","fieldName":"individual_1_child_age_30","position":47,"width":412,"dataTypeName":"money","tableColumnId":16639850,"format":{},"flags":null,"metadata":{}},{"id":162968505,"name":"Individual+1 child, Age 40","fieldName":"individual_1_child_age_40","position":48,"width":412,"dataTypeName":"money","tableColumnId":16639851,"format":{},"flags":null,"metadata":{}},{"id":162968506,"name":"Individual+1 child, Age 50","fieldName":"individual_1_child_age_50","position":49,"width":412,"dataTypeName":"money","tableColumnId":16639852,"format":{},"flags":null,"metadata":{}},{"id":162968507,"name":"Individual+2 children, Age 21","fieldName":"individual_2_children_age_21","position":50,"width":448,"dataTypeName":"money","tableColumnId":16639853,"format":{},"flags":null,"metadata":{}},{"id":162968508,"name":"Individual+2 children, Age 30","fieldName":"individual_2_children_age_30","position":51,"width":448,"dataTypeName":"money","tableColumnId":16639854,"format":{},"flags":null,"metadata":{}},{"id":162968509,"name":"Individual+2 children, Age 40","fieldName":"individual_2_children_age_40","position":52,"width":448,"dataTypeName":"money","tableColumnId":16639855,"format":{},"flags":null,"metadata":{}},{"id":162968510,"name":"Individual+2 children, Age 50","fieldName":"individual_2_children_age_50","position":53,"width":448,"dataTypeName":"money","tableColumnId":16639856,"format":{},"flags":null,"metadata":{}},{"id":162968511,"name":"Individual+3 or more children, Age 21","fieldName":"individual_3_or_more_children_age_21","position":54,"width":544,"dataTypeName":"money","tableColumnId":16639857,"format":{},"flags":null,"metadata":{}},{"id":162968512,"name":"Individual+3 or more children, Age 30","fieldName":"individual_3_or_more_children_age_30","position":55,"width":544,"dataTypeName":"money","tableColumnId":16639858,"format":{},"flags":null,"metadata":{}},{"id":162968513,"name":"Individual+3 or more children, Age 40","fieldName":"individual_3_or_more_children_age_40","position":56,"width":544,"dataTypeName":"money","tableColumnId":16639859,"format":{},"flags":null,"metadata":{}},{"id":162968514,"name":"Individual+3 or more children, Age 50","fieldName":"individual_3_or_more_children_age_50","position":57,"width":544,"dataTypeName":"money","tableColumnId":16639860,"format":{},"flags":null,"metadata":{}},{"id":162968515,"name":"Standard Plan Cost Sharing","fieldName":"standard_plan_cost_sharing","position":58,"width":412,"dataTypeName":"text","tableColumnId":16639861,"format":{},"flags":null,"metadata":{}},{"id":162968516,"name":"Medical Deductible - individual - standard","fieldName":"medical_deductible_individual_standard","position":59,"width":604,"dataTypeName":"text","tableColumnId":16639862,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968517,"name":"Drug Deductible - individual - standard","fieldName":"drug_deductible_individual_standard","position":60,"width":568,"dataTypeName":"text","tableColumnId":16639863,"format":{},"flags":null,"metadata":{}},{"id":162968518,"name":"Medical Deductible -family - standard","fieldName":"medical_deductible_family_standard","position":61,"width":544,"dataTypeName":"text","tableColumnId":16639864,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968519,"name":"Drug Deductible - family - standard","fieldName":"drug_deductible_family_standard","position":62,"width":520,"dataTypeName":"text","tableColumnId":16639865,"format":{},"flags":null,"metadata":{}},{"id":162968520,"name":"Medical Maximum Out Of Pocket - individual - standard","fieldName":"medical_maximum_out_of_pocket_individual_standard","position":63,"width":700,"dataTypeName":"text","tableColumnId":16639866,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968521,"name":"Drug Maximum Out of Pocket - individual - standard","fieldName":"drug_maximum_out_of_pocket_individual_standard","position":64,"width":700,"dataTypeName":"text","tableColumnId":16639867,"format":{},"flags":null,"metadata":{}},{"id":162968522,"name":"Medical Maximum Out of Pocket - family - standard","fieldName":"medical_maximum_out_of_pocket_family_standard","position":65,"width":688,"dataTypeName":"text","tableColumnId":16639868,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968523,"name":"Drug Maximum Out of Pocket - Family  - standard","fieldName":"drug_maximum_out_of_pocket_family_standard","position":66,"width":664,"dataTypeName":"text","tableColumnId":16639869,"format":{},"flags":null,"metadata":{}},{"id":162968524,"name":"Primary Care Physician  - standard","fieldName":"primary_care_physician_standard","position":67,"width":508,"dataTypeName":"text","tableColumnId":16639870,"format":{},"flags":null,"metadata":{}},{"id":162968525,"name":"Specialist  - standard","fieldName":"specialist_standard","position":68,"width":364,"dataTypeName":"text","tableColumnId":16639871,"format":{},"flags":null,"metadata":{}},{"id":162968526,"name":"Emergency Room  - standard","fieldName":"emergency_room_standard","position":69,"width":412,"dataTypeName":"text","tableColumnId":16639872,"format":{},"flags":null,"metadata":{}},{"id":162968527,"name":"Inpatient Facility  - standard","fieldName":"inpatient_facility_standard","position":70,"width":460,"dataTypeName":"text","tableColumnId":16639873,"format":{},"flags":null,"metadata":{}},{"id":162968528,"name":"Inpatient Physician - standard","fieldName":"inpatient_physician_standard","position":71,"width":460,"dataTypeName":"text","tableColumnId":16639874,"format":{},"flags":null,"metadata":{}},{"id":162968529,"name":"Generic Drugs - standard","fieldName":"generic_drugs_standard","position":72,"width":388,"dataTypeName":"text","tableColumnId":16639875,"format":{},"flags":null,"metadata":{}},{"id":162968530,"name":"Preferred Brand Drugs - standard","fieldName":"preferred_brand_drugs_standard","position":73,"width":484,"dataTypeName":"text","tableColumnId":16639876,"format":{},"flags":null,"metadata":{}},{"id":162968531,"name":"Non-preferred Brand Drugs - standard","fieldName":"non_preferred_brand_drugs_standard","position":74,"width":532,"dataTypeName":"text","tableColumnId":16639877,"format":{},"flags":null,"metadata":{}},{"id":162968532,"name":"Specialty Drugs - standard","fieldName":"specialty_drugs_standard","position":75,"width":412,"dataTypeName":"text","tableColumnId":16639878,"format":{},"flags":null,"metadata":{}},{"id":162968533,"name":"73 Percent Actuarial Value Silver Plan Cost Sharing","fieldName":"_73_percent_actuarial_value_silver_plan_cost_sharing","position":76,"width":700,"dataTypeName":"text","tableColumnId":16639879,"format":{},"flags":null,"metadata":{}},{"id":162968534,"name":"Medical Deductible - individual - 73 percent","fieldName":"medical_deductible_individual_73_percent","position":77,"width":628,"dataTypeName":"text","tableColumnId":16639880,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968535,"name":"Drug Deductible - individual - 73 percent","fieldName":"drug_deductible_individual_73_percent","position":78,"width":592,"dataTypeName":"text","tableColumnId":16639881,"format":{},"flags":null,"metadata":{}},{"id":162968536,"name":"Medical Deductible - family - 73 percent","fieldName":"medical_deductible_family_73_percent","position":79,"width":580,"dataTypeName":"text","tableColumnId":16639882,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968537,"name":"Drug Deductible - family - 73 percent","fieldName":"drug_deductible_family_73_percent","position":80,"width":544,"dataTypeName":"text","tableColumnId":16639883,"format":{},"flags":null,"metadata":{}},{"id":162968538,"name":"Medical Maximum Out Of Pocket - individual - 73 percent","fieldName":"medical_maximum_out_of_pocket_individual_73_percent","position":81,"width":700,"dataTypeName":"text","tableColumnId":16639884,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968539,"name":"Drug Maximum Out of Pocket - individual - 73 percent","fieldName":"drug_maximum_out_of_pocket_individual_73_percent","position":82,"width":700,"dataTypeName":"text","tableColumnId":16639885,"format":{},"flags":null,"metadata":{}},{"id":162968540,"name":"Medical Maximum Out of Pocket - family - 73 percent","fieldName":"medical_maximum_out_of_pocket_family_73_percent","position":83,"width":700,"dataTypeName":"text","tableColumnId":16639886,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968541,"name":"Drug Maximum Out of Pocket - Family - 73 percent","fieldName":"drug_maximum_out_of_pocket_family_73_percent","position":84,"width":676,"dataTypeName":"text","tableColumnId":16639887,"format":{},"flags":null,"metadata":{}},{"id":162968542,"name":"Primary Care Physician - 73 percent","fieldName":"primary_care_physician_73_percent","position":85,"width":520,"dataTypeName":"text","tableColumnId":16639888,"format":{},"flags":null,"metadata":{}},{"id":162968543,"name":"Specialist - 73 percent","fieldName":"specialist_73_percent","position":86,"width":376,"dataTypeName":"text","tableColumnId":16639889,"format":{},"flags":null,"metadata":{}},{"id":162968544,"name":"Emergency Room - 73 percent","fieldName":"emergency_room_73_percent","position":87,"width":424,"dataTypeName":"text","tableColumnId":16639890,"format":{},"flags":null,"metadata":{}},{"id":162968545,"name":"Inpatient Facility - 73 percent","fieldName":"inpatient_facility_73_percent","position":88,"width":472,"dataTypeName":"text","tableColumnId":16639891,"format":{},"flags":null,"metadata":{}},{"id":162968546,"name":"Inpatient Physician - 73 percent","fieldName":"inpatient_physician_73_percent","position":89,"width":484,"dataTypeName":"text","tableColumnId":16639892,"format":{},"flags":null,"metadata":{}},{"id":162968547,"name":"Generic Drugs - 73 percent","fieldName":"generic_drugs_73_percent","position":90,"width":412,"dataTypeName":"text","tableColumnId":16639893,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968548,"name":"Preferred Brand Drugs - 73 percent","fieldName":"preferred_brand_drugs_73_percent","position":91,"width":508,"dataTypeName":"text","tableColumnId":16639894,"format":{},"flags":null,"metadata":{}},{"id":162968549,"name":"Non-preferred Brand Drugs - 73 percent","fieldName":"non_preferred_brand_drugs_73_percent","position":92,"width":556,"dataTypeName":"text","tableColumnId":16639895,"format":{},"flags":null,"metadata":{}},{"id":162968550,"name":"Specialty Drugs - 73 percent","fieldName":"specialty_drugs_73_percent","position":93,"width":436,"dataTypeName":"text","tableColumnId":16639896,"format":{},"flags":null,"metadata":{}},{"id":162968551,"name":"87 Percent Actuarial Value Silver Plan Cost Sharing","fieldName":"_87_percent_actuarial_value_silver_plan_cost_sharing","position":94,"width":700,"dataTypeName":"text","tableColumnId":16639897,"format":{},"flags":null,"metadata":{}},{"id":162968552,"name":"Medical Deductible - individual - 87 percent","fieldName":"medical_deductible_individual_87_percent","position":95,"width":628,"dataTypeName":"text","tableColumnId":16639898,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968553,"name":"Drug Deductible - individual - 87 percent","fieldName":"drug_deductible_individual_87_percent","position":96,"width":592,"dataTypeName":"text","tableColumnId":16639899,"format":{},"flags":null,"metadata":{}},{"id":162968554,"name":"Medical Deductible - family - 87 percent","fieldName":"medical_deductible_family_87_percent","position":97,"width":580,"dataTypeName":"text","tableColumnId":16639900,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968555,"name":"Drug Deductible - family - 87 percent","fieldName":"drug_deductible_family_87_percent","position":98,"width":544,"dataTypeName":"text","tableColumnId":16639901,"format":{},"flags":null,"metadata":{}},{"id":162968556,"name":"Medical Maximum Out Of Pocket - individual - 87 percent","fieldName":"medical_maximum_out_of_pocket_individual_87_percent","position":99,"width":700,"dataTypeName":"text","tableColumnId":16639902,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968557,"name":"Drug Maximum Out of Pocket - individual - 87 percent","fieldName":"drug_maximum_out_of_pocket_individual_87_percent","position":100,"width":700,"dataTypeName":"text","tableColumnId":16639903,"format":{},"flags":null,"metadata":{}},{"id":162968558,"name":"Medical Maximum Out of Pocket - family - 87 percent","fieldName":"medical_maximum_out_of_pocket_family_87_percent","position":101,"width":700,"dataTypeName":"text","tableColumnId":16639904,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968559,"name":"Drug Maximum Out of Pocket - Family - 87 percent","fieldName":"drug_maximum_out_of_pocket_family_87_percent","position":102,"width":676,"dataTypeName":"text","tableColumnId":16639905,"format":{},"flags":null,"metadata":{}},{"id":162968560,"name":"Primary Care Physician - 87 percent","fieldName":"primary_care_physician_87_percent","position":103,"width":520,"dataTypeName":"text","tableColumnId":16639906,"format":{},"flags":null,"metadata":{}},{"id":162968561,"name":"Specialist - 87 percent","fieldName":"specialist_87_percent","position":104,"width":376,"dataTypeName":"text","tableColumnId":16639907,"format":{},"flags":null,"metadata":{}},{"id":162968562,"name":"Emergency Room - 87 percent","fieldName":"emergency_room_87_percent","position":105,"width":424,"dataTypeName":"text","tableColumnId":16639908,"format":{},"flags":null,"metadata":{}},{"id":162968563,"name":"Inpatient Facility - 87 percent","fieldName":"inpatient_facility_87_percent","position":106,"width":472,"dataTypeName":"text","tableColumnId":16639909,"format":{},"flags":null,"metadata":{}},{"id":162968564,"name":"Inpatient Physician - 87 percent","fieldName":"inpatient_physician_87_percent","position":107,"width":484,"dataTypeName":"text","tableColumnId":16639910,"format":{},"flags":null,"metadata":{}},{"id":162968565,"name":"Generic Drugs - 87 percent","fieldName":"generic_drugs_87_percent","position":108,"width":412,"dataTypeName":"text","tableColumnId":16639911,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968566,"name":"Preferred Brand Drugs - 87 percent","fieldName":"preferred_brand_drugs_87_percent","position":109,"width":508,"dataTypeName":"text","tableColumnId":16639912,"format":{},"flags":null,"metadata":{}},{"id":162968567,"name":"Non-preferred Brand Drugs - 87 percent","fieldName":"non_preferred_brand_drugs_87_percent","position":110,"width":556,"dataTypeName":"text","tableColumnId":16639913,"format":{},"flags":null,"metadata":{}},{"id":162968568,"name":"Specialty Drugs - 87 percent","fieldName":"specialty_drugs_87_percent","position":111,"width":436,"dataTypeName":"text","tableColumnId":16639914,"format":{},"flags":null,"metadata":{}},{"id":162968569,"name":"94 Percent Actuarial Value Silver Plan Cost Sharing","fieldName":"_94_percent_actuarial_value_silver_plan_cost_sharing","position":112,"width":700,"dataTypeName":"text","tableColumnId":16639915,"format":{},"flags":null,"metadata":{}},{"id":162968570,"name":"Medical Deductible - individual - 94 percent","fieldName":"medical_deductible_individual_94_percent","position":113,"width":628,"dataTypeName":"text","tableColumnId":16639916,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968571,"name":"Drug Deductible - individual - 94 percent","fieldName":"drug_deductible_individual_94_percent","position":114,"width":592,"dataTypeName":"text","tableColumnId":16639917,"format":{},"flags":null,"metadata":{}},{"id":162968572,"name":"Medical Deductible - family - 94 percent","fieldName":"medical_deductible_family_94_percent","position":115,"width":580,"dataTypeName":"text","tableColumnId":16639918,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968573,"name":"Drug Deductible - family - 94 percent","fieldName":"drug_deductible_family_94_percent","position":116,"width":544,"dataTypeName":"text","tableColumnId":16639919,"format":{},"flags":null,"metadata":{}},{"id":162968574,"name":"Medical Maximum Out Of Pocket -individual - 94 percent","fieldName":"medical_maximum_out_of_pocket_individual_94_percent","position":117,"width":700,"dataTypeName":"text","tableColumnId":16639920,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968575,"name":"Drug Maximum Out of Pocket - individual - 94 percent","fieldName":"drug_maximum_out_of_pocket_individual_94_percent","position":118,"width":700,"dataTypeName":"text","tableColumnId":16639921,"format":{},"flags":null,"metadata":{}},{"id":162968576,"name":"Medical Maximum Out of Pocket - family - 94 percent","fieldName":"medical_maximum_out_of_pocket_family_94_percent","position":119,"width":700,"dataTypeName":"text","tableColumnId":16639927,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968577,"name":"Drug Maximum Out of Pocket - Family  - 94 percent","fieldName":"drug_maximum_out_of_pocket_family_94_percent","position":120,"width":688,"dataTypeName":"text","tableColumnId":16639939,"format":{},"flags":null,"metadata":{}},{"id":162968578,"name":"Primary Care Physician - 94 percent","fieldName":"primary_care_physician_94_percent","position":121,"width":520,"dataTypeName":"text","tableColumnId":16639940,"format":{},"flags":null,"metadata":{}},{"id":162968579,"name":"Specialist - 94 percent","fieldName":"specialist_94_percent","position":122,"width":376,"dataTypeName":"text","tableColumnId":16639941,"format":{},"flags":null,"metadata":{}},{"id":162968580,"name":"Emergency Room - 94 percent","fieldName":"emergency_room_94_percent","position":123,"width":424,"dataTypeName":"text","tableColumnId":16639942,"format":{},"flags":null,"metadata":{}},{"id":162968581,"name":"Inpatient Facility  - 94 percent","fieldName":"inpatient_facility_94_percent","position":124,"width":484,"dataTypeName":"text","tableColumnId":16639943,"format":{},"flags":null,"metadata":{}},{"id":162968582,"name":"Inpatient Physician  - 94 percent","fieldName":"inpatient_physician_94_percent","position":125,"width":496,"dataTypeName":"text","tableColumnId":16639944,"format":{},"flags":null,"metadata":{}},{"id":162968583,"name":"Generic Drugs - 94 percent","fieldName":"generic_drugs_94_percent","position":126,"width":412,"dataTypeName":"text","tableColumnId":16639945,"format":{"humane":"false","currency":"USD","align":"right"},"flags":null,"metadata":{}},{"id":162968584,"name":"Preferred Brand Drugs - 94 percent","fieldName":"preferred_brand_drugs_94_percent","position":127,"width":508,"dataTypeName":"text","tableColumnId":16639946,"format":{},"flags":null,"metadata":{}},{"id":162968585,"name":"Non-preferred Brand Drugs - 94 percent","fieldName":"non_preferred_brand_drugs_94_percent","position":128,"width":556,"dataTypeName":"text","tableColumnId":16639947,"format":{},"flags":null,"metadata":{}},{"id":162968586,"name":"Specialty Drugs - 94 percent","fieldName":"specialty_drugs_94_percent","position":129,"width":436,"dataTypeName":"text","tableColumnId":16639948,"format":{},"flags":null,"metadata":{}}],"metadata":{"renderTypeConfig":{"visible":{"table":true}},"availableDisplayTypes":["table","fatrow","page"],"rdfSubject":"0","attachments":[{"assetId":"mPgkYIbiTIuaurp4FIA7OtugLYKCFdDLjWpqgZq6s8A","blobId":"","name":"Medical-Indi-Landscape-Inst.pdf","filename":"Medical-Indi-Landscape-Inst.pdf"},{"assetId":"Hz_yV-dx1jQe-g4irSuGQobMkwY4zJg5Vjxpav3jat4","name":"Medical-Indi-Landscape-Inst.pdf","filename":"Medical-Indi-Landscape-Inst.pdf"}],"jsonQuery":{}},"query":{},"flags":["default"],"originalViewId":"b8in-sz6k","displayFormat":{}}'

    query_params = {
      accessType: "WIDGET",
      method:     "getByIds",
      asHashes:   "true",
      start:      "0",
      length:     "50",
      meta:       "true",
    }

    headers = {
      "Origin"       => "https://data.healthcare.gov",
      "X-CSRF-Token" => "T3Kn7KwQVutp/Nbmryv7peFftPzq9reYYy9ua35qmao=",
      "Content-Type" => "application/json",
      "X-App-Token"  => "U29jcmF0YS0td2VraWNrYXNz0",
      "Cookie"       => "optimizelyEndUserId=oeu1432408627788r0.4290139575023204; __utmt=1; mp_d450a7955245ff6ab5e419c3aae8ff87_mixpanel=%7B%22distinct_id%22%3A%20%2214d823520bd2ec-011843bd3-193f6a54-13c680-14d823520bedc2%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%7D; _socrata_session_id=BAh7B0kiD3Nlc3Npb25faWQGOgZFRiIlZDRiYTJiMmYzMjFhMTQwNzk0ODVkNjIxZjljOGRkNjVJIhBfY3NyZl90b2tlbgY7AEZJIjFUM0tuN0t3UVZ1dHAvTmJtcnl2N3BlRmZ0UHpxOXJlWVl5OXVhMzVxbWFvPQY7AEY%3D--31d867de221f3fc6f0ed4231bf55587b6ad183fb; optimizelySegments=%7B%22171652904%22%3A%22false%22%2C%22171674651%22%3A%22none%22%2C%22171946972%22%3A%22gc%22%2C%22172159083%22%3A%22search%22%2C%222417020537%22%3A%22true%22%7D; optimizelyPendingLogEvents=%5B%5D; optimizelyBuckets=%7B%222497520122%22%3A%222494830067%22%7D; __utma=168641214.908122508.1432408628.1432408628.1432408831.2; __utmb=168641214.2.10.1432408831; __utmc=168641214; __utmz=168641214.1432408831.2.2.utmcsr=google|utmccn=(organic)|utmcmd=organic|utmctr=(not%20provided); mp_939b40c05d53aaa76be9b122d6255fb2_mixpanel=%7B%22distinct_id%22%3A%20%2214d8235209a5e-04d32256c-193f6a54-13c680-14d8235209b783%22%2C%22Language%22%3A%20%22english%22%2C%22User%20Type%22%3A%20null%2C%22Full%20Url%22%3A%20%22https%3A%2F%2Fwww.healthcare.gov%2Fhealth-plan-information%2F%22%2C%22Uri%22%3A%20%22%2Fhealth-plan-information%2F%22%2C%22Hostname%22%3A%20%22www.healthcare.gov%22%2C%22%24initial_referrer%22%3A%20%22%24direct%22%2C%22%24initial_referring_domain%22%3A%20%22%24direct%22%2C%22%24search_engine%22%3A%20%22google%22%7D; socrata-csrf-token=T3Kn7KwQVutp%2FNbmryv7peFftPzq9reYYy9ua35qmao%3D; __utma=101938452.1516658013.1432408833.1432408833.1432408833.1; __utmb=101938452.2.10.1432408833; __utmc=101938452; __utmz=101938452.1432408833.1.1.utmcsr=healthcare.gov|utmccn=(referral)|utmcmd=referral|utmcct=/health-plan-information/",
      :params        => query_params
    }

    result = RestClient.post("https://data.healthcare.gov/views/INLINE/rows.json", body, headers)
    raise unless result.code == 200

    File.write(filepath, result)
  end
end
